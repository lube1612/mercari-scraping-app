# メルカリ ポケモンカードスクレイパー 実装状況

## ✅ 実装完了項目

### 1. 基本機能
- ✅ `scrape_list()` - 商品一覧ページから商品リンクを取得
- ✅ `scrape_detail()` - 商品詳細ページから情報を取得
- ✅ 複数のセレクタパターンに対応（フォールバック機能）

### 2. ポケモンカード専用機能
- ✅ レアリティの自動抽出（SR、UR、HR、RR、Rなど）
- ✅ セット名・拡張パック名の抽出
- ✅ カード番号の抽出
- ✅ カード名の取得

### 3. 取得できる情報項目

#### 基本情報
- タイトル
- 価格
- 説明
- 商品の状態
- 送料
- カテゴリー
- 画像URL

#### ポケモンカード特有の情報
- カード名
- レアリティ
- セット名
- カード番号

## 🔧 実装の特徴

1. **複数のセレクタパターンに対応**
   - メルカリのサイト構造が変更されても、複数のセレクタを試すことで取得できる可能性が高い

2. **エラーハンドリング**
   - 各セレクタでエラーが発生しても、次のセレクタを試行
   - デバッグ用にHTMLを保存する機能

3. **ポケモンカード情報の自動抽出**
   - 説明文からレアリティ、セット名、カード番号を自動抽出
   - タイトルからもレアリティを抽出

## ⚠️ 注意事項

### サイト構造の変更について
メルカリのサイト構造は変更される可能性があります。もし取得できない場合は：

1. `98_tmp/mercari_page_structure.html` を確認
2. 実際のサイト構造に合わせてセレクタを調整
3. `mercari/scraper.py` のセレクタを更新

### 利用規約について
- メルカリの利用規約を確認してください
- 過度なリクエストは避けてください
- 適切な待機時間を設定してください

## 🚀 次のステップ

1. **テスト実行**
   ```bash
   python3 mercari/scrape.py
   ```

2. **結果の確認**
   - `mercari/output/mercari_items.csv` を確認
   - 取得できたデータが正しいか確認

3. **必要に応じて調整**
   - セレクタの追加・修正
   - 情報抽出ロジックの改善

## 📝 カスタマイズ例

### 検索キーワードを変更
`mercari/scrape.py` の `target_url` を変更：

```python
# SRレアリティのカードを検索
target_url = "https://www.mercari.com/jp/search/?keyword=ポケモンカード SR"

# 特定の拡張パックを検索
target_url = "https://www.mercari.com/jp/search/?keyword=ポケモンカード 拡張パック"
```

### 取得件数を変更
```python
max_items = 20  # 20件取得
```

### ヘッドレスモードで実行（ブラウザを表示しない）
`mercari/scraper.py` の `MercariScraper` の初期化時に：
```python
with MercariScraper(headless=True) as scraper:
```
