# Playwright Chromium 手動ダウンロード詳細手順

## ⚠️ 問題が発生した場合

スクリプトでダウンロードが失敗した場合、以下の手順で手動でダウンロードしてください。

## 📥 方法1: ブラウザから直接ダウンロード（推奨）

### Safariの場合

1. 以下のURLをSafariで開く：
   ```
   https://playwright.azureedge.net/builds/chromium/1200/chromium-mac-x64.zip
   ```

2. **重要**: URLを**右クリック**（またはControl+クリック）して、「**リンク先をダウンロード**」を選択

3. ダウンロードフォルダに `chromium-mac-x64.zip` が保存されます（約150-200MB）

### Chromeの場合

1. 以下のURLをChromeで開く：
   ```
   https://playwright.azureedge.net/builds/chromium/1200/chromium-mac-x64.zip
   ```

2. **重要**: URLを**右クリック**して、「**リンク先を名前を付けて保存**」を選択

3. ファイル名を `chromium-mac-x64.zip` として保存

### Firefoxの場合

1. 以下のURLをFirefoxで開く：
   ```
   https://playwright.azureedge.net/builds/chromium/1200/chromium-mac-x64.zip
   ```

2. **重要**: URLを**右クリック**して、「**リンクを名前を付けて保存**」を選択

3. ファイル名を `chromium-mac-x64.zip` として保存

## 📥 方法2: ターミナルから直接ダウンロード

**ターミナルで以下のコマンドを実行：**

```bash
# 1. ダウンロードフォルダに移動
cd ~/Downloads

# 2. ZIPファイルをダウンロード（進捗表示あり）
curl -L --progress-bar -o chromium-mac-x64.zip https://playwright.azureedge.net/builds/chromium/1200/chromium-mac-x64.zip

# 3. ファイルサイズを確認（150MB以上である必要がある）
ls -lh chromium-mac-x64.zip

# 4. ZIPファイルかどうか確認
file chromium-mac-x64.zip
```

**期待される出力:**
- ファイルサイズ: 約150-200MB
- ファイルタイプ: `Zip archive data`

## 🔧 ダウンロード後のインストール手順

ZIPファイルをダウンロードしたら、以下のコマンドを実行：

```bash
# 1. 保存先ディレクトリを作成
mkdir -p ~/Library/Caches/ms-playwright/chromium-1200/chrome-mac-x64

# 2. ZIPファイルを解凍
cd ~/Library/Caches/ms-playwright/chromium-1200/chrome-mac-x64
unzip ~/Downloads/chromium-mac-x64.zip

# 3. 実行権限を付与
chmod +x "Google Chrome for Testing.app/Contents/MacOS/Google Chrome for Testing"

# 4. インストール確認
ls -la "Google Chrome for Testing.app/Contents/MacOS/Google Chrome for Testing"
```

## ✅ インストール確認

以下のコマンドでインストールが成功したか確認：

```bash
python3 -c "from playwright.sync_api import sync_playwright; p = sync_playwright().start(); browser = p.chromium.launch(headless=True); print('✓ 成功'); browser.close(); p.stop()"
```

## 🔍 トラブルシューティング

### 問題: ZIPファイルが24バイトしかない

**原因**: エラーページがダウンロードされた可能性があります

**解決方法**:
1. ダウンロードしたファイルを削除
2. ブラウザでURLを開いて、右クリックから「リンク先をダウンロード」を選択
3. または、ターミナルから `curl` コマンドで再ダウンロード

### 問題: 解凍時にエラーが発生する

**原因**: ZIPファイルが破損している可能性があります

**解決方法**:
1. ZIPファイルの整合性を確認：
   ```bash
   unzip -t ~/Downloads/chromium-mac-x64.zip
   ```

2. 破損している場合は、再ダウンロードしてください

### 問題: 実行ファイルが見つからない

**原因**: 解凍後のディレクトリ構造が正しくない可能性があります

**解決方法**:
1. 解凍後の構造を確認：
   ```bash
   ls -la ~/Library/Caches/ms-playwright/chromium-1200/chrome-mac-x64/
   ```

2. 以下の構造になっている必要があります：
   ```
   chrome-mac-x64/
   └── Google Chrome for Testing.app/
       └── Contents/
           └── MacOS/
               └── Google Chrome for Testing
   ```
