# メルカリスクレイピングシステム - 使い方ガイド

## 📋 基本的な使い方

### 1. Cursorでプロジェクトを開く

**毎回の作業開始時：**

1. Cursorを起動
2. プロジェクトフォルダを開く：
   ```
   /Users/shimadaeiji/Documents/Cursor/e2e
   ```
3. メルカリのスクレイピングシステムが利用可能な状態になります

### 2. 基本的なワークフロー

#### パターンA: ターミナルから直接実行

**Cursorのターミナルでコマンドを実行：**

```bash
# 環境変数を設定
export PLAYWRIGHT_BROWSERS_PATH=~/playwright-browsers

# メルカリスクレイピングを実行
python3 mercari/scrape.py
```

#### パターンB: Streamlitアプリを使用（推奨）

**Cursorのターミナルでコマンドを実行：**

```bash
# 環境変数を設定
export PLAYWRIGHT_BROWSERS_PATH=~/playwright-browsers

# Streamlitアプリを起動
streamlit run streamlit_app.py
```

ブラウザが開いたら：
1. 左側のサイドバーで条件を入力
2. 「スクレイピング実行」ボタンをクリック
3. 結果を確認・ダウンロード

#### パターンC: CursorのAIアシスタントに指示

**Cursorのチャットで指示を出す：**

例：
- 「ポケモンカードを10件取得してCSVに保存してください」
- 「価格が1000円以下の商品だけを取得してください」
- 「Amazonと比較して、Amazonより安い商品を5件取得してください」

## 🎯 よくある使い方のパターン

### パターン1: 基本的なスクレイピング

**指示例：**
```
「ポケモンカードを5件取得してCSVに保存してください」
```

**実行方法：**
- `mercari/scrape.py` を編集して `max_items = 5` に設定
- ターミナルで `python3 mercari/scrape.py` を実行

### パターン2: 条件を変更して実行

**指示例：**
```
「検索キーワードを『シャイニースターV』に変更して10件取得してください」
```

**実行方法：**
- `mercari/scrape.py` の `target_url` を変更
- または、Streamlitアプリで検索キーワードを変更して実行

### パターン3: 価格比較

**指示例：**
```
「Amazonと比較して、Amazonより安い商品を5件取得してください」
```

**実行方法：**
- `compare_with_amazon_view.py` を実行
- または、Streamlitアプリで「Amazonと価格比較」をチェックして実行

## 📁 プロジェクト構造

```
e2e/
├── mercari/              # メルカリスクレイパー
│   ├── scraper.py        # スクレイパーの実装
│   ├── scrape.py         # 実行スクリプト
│   └── output/           # 出力CSVファイル
│       └── mercari_items.csv
├── common/               # 共通モジュール
│   ├── base_scraper.py   # ベーススクレイパー
│   └── utils.py          # ユーティリティ関数
├── streamlit_app.py      # Streamlitアプリケーション
└── compare_with_amazon_view.py  # Amazon比較スクリプト
```

## 🔧 カスタマイズ方法

### 検索キーワードを変更する場合

**方法1: スクリプトを編集**
```python
# mercari/scrape.py を編集
target_url = "https://www.mercari.com/jp/search/?keyword=シャイニースターV"
```

**方法2: Streamlitアプリを使用**
- 左側のサイドバーで検索キーワードを入力

**方法3: CursorのAIアシスタントに指示**
- 「検索キーワードを『シャイニースターV』に変更してください」

### 取得件数を変更する場合

**方法1: スクリプトを編集**
```python
# mercari/scrape.py を編集
max_items = 10  # 10件に変更
```

**方法2: Streamlitアプリを使用**
- 左側のサイドバーで取得件数を設定

**方法3: CursorのAIアシスタントに指示**
- 「取得件数を10件に変更してください」

## 💡 推奨される使い方

### 日常的な使い方

1. **Cursorを開く**
   - プロジェクトフォルダを開く

2. **Streamlitアプリを起動**
   ```bash
   streamlit run streamlit_app.py
   ```

3. **ブラウザで操作**
   - 条件を入力
   - 実行ボタンをクリック
   - 結果を確認・ダウンロード

### カスタマイズが必要な場合

1. **CursorのAIアシスタントに指示**
   - 「検索キーワードを変更してください」
   - 「取得件数を増やしてください」
   - 「新しい機能を追加してください」

2. **コードを確認・編集**
   - 必要に応じてコードを確認
   - AIアシスタントが自動的に修正

## 🎯 まとめ

**基本的な使い方：**

1. ✅ Cursorでプロジェクトフォルダを開く
2. ✅ メルカリのスクレイピングシステムが利用可能な状態
3. ✅ ターミナルで実行するか、Streamlitアプリを使用
4. ✅ 必要に応じてCursorのAIアシスタントに指示

**推奨される方法：**

- **日常的な使い方**: Streamlitアプリ（`streamlit run streamlit_app.py`）
- **カスタマイズが必要**: CursorのAIアシスタントに指示
- **直接実行**: ターミナルで `python3 mercari/scrape.py`

## 📝 次のステップ

1. **Streamlitアプリを試す**
   ```bash
   streamlit run streamlit_app.py
   ```

2. **カスタマイズする**
   - CursorのAIアシスタントに指示を出す
   - コードを確認・編集

3. **結果を確認**
   - CSVファイルを確認
   - 必要に応じて分析
